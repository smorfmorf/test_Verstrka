<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="stylesheet" href="/scss/index.scss" />

        <style>
            .header {
                flex: 0 0 auto;
            }
            .footer {
                flex: 0 0 auto;
                margin-top: auto;
            }
        </style>
    </head>

    <body>
        <div class="wrapper flex flex-column h-screen">
            <header class="header">
                <div class="container header__container">
                    <button
                        id="menu-btn"
                        class="btn menu-btn menu__btn menu__btn-burger menu__btn--clipLeftB"
                    >
                        <div class="burger">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </button>
                    <div class="header__left">
                        <div class="header__location">
                            <img src="./location.svg" alt="" />
                            г. Благовещенск, ул. Ленина, 167
                        </div>
                        <div class="header__phone">
                            <img src="/phone.svg" alt="" />8 (4162) 77 78 06
                        </div>
                        <div class="header__email">
                            <a href="mailto:aodnt@yandex.ru">aodnt@yandex.ru</a>
                        </div>
                        <a
                            id="feedback"
                            href="/index.html"
                            class="bg-yellow-400 p-1 text-sm rounded-lg cursor-pointer hover:bg-yellow-500 hover:scale-110 transition"
                        >
                            Обратная связь
                        </a>
                    </div>
                    <div class="header__right">
                        <svg
                            class="header__eye"
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="13"
                            viewBox="0 0 24 13"
                            fill="none"
                        >
                            <path
                                d="M23.5877 5.97663C23.5392 5.91527 22.3764 4.45649 20.3827 2.99184C17.7187 1.03456 14.82 0 11.9999 0C9.17999 0 6.28126 1.03456 3.61711 2.99184C1.62354 4.45644 0.460671 5.91527 0.412176 5.97663L0 6.49793L0.412229 7.01929C0.460723 7.08065 1.62359 8.53948 3.61717 10.0041C6.28131 11.9614 9.18005 12.9959 12 12.9959C14.82 12.9959 17.7187 11.9614 20.3827 10.0041C22.3764 8.53948 23.5392 7.08065 23.5877 7.01929L24 6.49793L23.5877 5.97663ZM11.9999 11.0501C9.48988 11.0501 7.44775 9.00803 7.44775 6.49793C7.44775 6.10467 7.49788 5.72292 7.59208 5.35866L6.55279 5.18375C6.45096 5.60538 6.39695 6.04546 6.39695 6.49793C6.39695 8.11932 7.08953 9.58182 8.19403 10.6059C6.77224 10.0807 5.56325 9.34371 4.65079 8.67719C3.52034 7.85152 2.67313 7.01645 2.19013 6.49793C2.67334 5.97926 3.52044 5.14429 4.65079 4.31868C5.56325 3.65216 6.7723 2.91518 8.19403 2.38994L8.89124 3.17583C9.7055 2.41337 10.7991 1.94577 11.9999 1.94577C14.51 1.94577 16.552 3.98784 16.552 6.49793C16.552 9.00803 14.51 11.0501 11.9999 11.0501ZM19.3491 8.67719C18.4365 9.34371 17.2275 10.0807 15.8058 10.6059C16.9103 9.58187 17.6028 8.11937 17.6028 6.49788C17.6028 4.87639 16.9103 3.41394 15.8058 2.38989C17.2276 2.91513 18.4365 3.65211 19.3491 4.31863C20.4795 5.14429 21.3267 5.97936 21.8097 6.49783C21.3265 7.01661 20.4794 7.85163 19.3491 8.67719Z"
                                fill="black"
                            />
                            <path
                                d="M9.1034 5.61306C9.01797 5.89305 8.97168 6.19006 8.97168 6.49799C8.97168 8.17055 10.3276 9.52651 12.0002 9.52651C13.6727 9.52651 15.0286 8.1706 15.0286 6.49799C15.0286 4.82538 13.6727 3.46948 12.0002 3.46948C11.1855 3.46948 10.4465 3.79176 9.90216 4.31506L11.396 5.99886L9.1034 5.61306Z"
                                fill="black"
                            />
                        </svg>

                        <button class="btn btn-dark btn--active btn--clipRightB btn--bg">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 18 18"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M13.3077 13.3077L17 17M15.7692 8.38462C15.7692 12.463 12.463 15.7692 8.38462 15.7692C4.3062 15.7692 1 12.463 1 8.38462C1 4.3062 4.3062 1 8.38462 1C12.463 1 15.7692 4.3062 15.7692 8.38462Z"
                                    stroke="white"
                                />
                            </svg>
                        </button>
                    </div>
                </div>
            </header>

            <main class="p-10 flex items-center justify-center">
                <form action="#" id="form" class="max-w-[500px] w-full">
                    <h2 class="text-center mb-4">Заполните данные:</h2>

                    <div class="flex flex-col gap-4">
                        <label for="name">Имя:</label>
                        <input
                            type="text"
                            id="name"
                            name="name"
                            required
                            class="bg-slate-200 rounded-xl p-2"
                        />

                        <label for="phone">Номер телефона:</label>
                        <input
                            type="tel"
                            id="phone"
                            name="phone"
                            required
                            placeholder="8 XXX XXX XX XX"
                            class="bg-slate-200 rounded-xl p-2"
                        />

                        <label for="email">Email:</label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            required
                            class="bg-slate-200 rounded-xl p-2"
                        />

                        <p class="text-red-500!" id="errorMsg"></p>
                        <button
                            class="btn bg-yellow-400! rounded-xl! hover:scale-110 transition!"
                            type="submit"
                        >
                            Отправить
                        </button>
                    </div>
                </form>
            </main>

            <footer class="footer">
                <div class="container footer__container">
                    <div class="footer__text">
                        Государственное автономное учреждение культуры Амурской области "Амурский
                        областной Дом народного творчества
                    </div>
                    <b>SP-Artgroup</b>
                </div>
            </footer>
        </div>

        <script type="module">
            import axios from "axios";
            const feedback = document.querySelector("#feedback");

            if (window.location.pathname === "/feedback.html") {
                feedback.textContent = "Вернуться назад";
            }

            const form = document.querySelector("#form");
            const errorMsg = document.querySelector("#errorMsg");

            form.addEventListener("submit", async (event) => {
                event.preventDefault();
                const name = form.name.value.trim();
                const phone = form.phone.value.trim();
                const email = form.email.value.trim();
                errorMsg.textContent = "";

                if (name.length < 2) {
                    errorMsg.textContent = "Имя должно содержать не менее 2 символов";
                    return;
                }
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    errorMsg.textContent = "Некорректный email.";
                    return;
                }

                const phoneRegex = /^8[0-9]{3}[0-9]{3}[0-9]{2}[0-9]{2}$/;
                if (!phoneRegex.test(phone)) {
                    errorMsg.textContent = "Некорректный номер телефона.";
                    return;
                }

                const { data } = await axios.post("http://localhost:3000/api/submit", {
                    name,
                    phone,
                    email,
                });
                console.log(data);
            });
        </script>
    </body>
</html>
